<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>osm_line2poly — osm_line2poly • osmplotr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="osm_line2poly — osm_line2poly" />

<meta property="og:description" content="Converts sf::sfc_LINSTRING objects to polygons by connecting end
points around the given bounding box. This is particularly useful for
plotting water and land delineated by coastlines. Coastlines in OpenStreetMap
are lines, not polygons, and so there is no directly way to plot ocean water
distinct from land. This function enables that by connecting the end points
of coastline LINESTRING objects to form closed polygons." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">osmplotr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/osmplotr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>osm_line2poly</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/osmplotr/blob/master/R/line2poly.R'><code>R/line2poly.R</code></a></small>
    <div class="hidden name"><code>osm_line2poly.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Converts <code>sf::sfc_LINSTRING</code> objects to polygons by connecting end
points around the given bounding box. This is particularly useful for
plotting water and land delineated by coastlines. Coastlines in OpenStreetMap
are lines, not polygons, and so there is no directly way to plot ocean water
distinct from land. This function enables that by connecting the end points
of coastline <code>LINESTRING</code> objects to form closed polygons.</p>
    
    </div>

    <pre class="usage"><span class='fu'>osm_line2poly</span>(<span class='no'>obj</span>, <span class='no'>bbox</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obj</th>
      <td><p>A Simple Features (<code>sf</code>) data frame of lines, typically as
returned by <code><a href='extract_osm_objects.html'>extract_osm_objects</a></code>, or by
<code><a href='http://www.rdocumentation.org/packages/osmdata/topics/osmdata_sf'>osmdata::osmdata_sf</a></code>.</p></td>
    </tr>
    <tr>
      <th>bbox</th>
      <td><p>bounding box (Latitude-longitude range) to be plotted.  A 2-by-2
matrix of 4 elements with columns of min and max values, and rows of x and y
values. Can also be an object of class <code>sf</code>, for example as returned
from <code>extract_osm_objects</code> or the <code>osmdata</code> package, in which case
the bounding box will be extracted from the object coordinates.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of three Simple Features (<code>sf</code>) data frames, labelled sea
islands and land.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This is a tricky problem for a number of reasons, and the current implementation
may not be correct, although it does successfully deal with a few tough situations.
Some of the issues are: an osm coastline query returns a mixture of "ways" and polygons.
Polygons correspond to islands, but not all islands are polygons. A "way" is a connected
set of points with the land on the left. A piece of coastline in a bounding box
may consist of multiple ways, which need to be connected together to create
a polygon. Also, ways extend outside the query bounding box, and may join
other ways that enter the bounding box (e.g ends of a peninsula). The degree
to which this happens depends on the scale of the bounding box. Coastlines may
enter at any bounding box edge and exit at any other, including the one they
entered from.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'># This example uses the \code{osmdata} package to extract data from 
# a named bounding box
</div><span class='co'># NOT RUN {</span>
<span class='fu'>library</span> (<span class='no'>magrittr</span>)
<span class='fu'>library</span> (<span class='no'>osmdata</span>)
<span class='no'>bb</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>osmdata</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/osmdata/topics/getbb'>getbb</a></span> (<span class='st'>"melbourne, australia"</span>)
<span class='no'>coast</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='extract_osm_objects.html'>extract_osm_objects</a></span> (<span class='kw'>bbox</span> <span class='kw'>=</span> <span class='no'>bb</span>, <span class='kw'>key</span> <span class='kw'>=</span> <span class='st'>"natural"</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>"coastline"</span>,
                              <span class='kw'>return_type</span> <span class='kw'>=</span> <span class='st'>"line"</span>)
<span class='no'>coast</span> <span class='kw'>&lt;-</span> <span class='fu'>osm_line2poly</span> (<span class='no'>coast</span>, <span class='kw'>bbox</span> <span class='kw'>=</span> <span class='no'>bb</span>)
<span class='co'># The following map then colours in just the ocean:</span>
<span class='no'>map</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='osm_basemap.html'>osm_basemap</a></span> (<span class='kw'>bbox</span> <span class='kw'>=</span> <span class='no'>bb</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='add_osm_objects.html'>add_osm_objects</a></span> (<span class='no'>coast</span>$<span class='no'>sea</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"lightsteelblue"</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='print_osm_map.html'>print_osm_map</a></span> ()
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Mark Padgham, Richard Beare.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

